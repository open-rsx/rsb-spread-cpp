IF(NOT RSBSPREAD_CONFIG_PROCESSED)
    SET(RSBSPREAD_CONFIG_PROCESSED TRUE)

    GET_FILENAME_COMPONENT(RSBSPREAD_CONFIG_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)

    IF(EXISTS "${RSBSPREAD_CONFIG_DIR}/CMakeCache.txt")
        INCLUDE("${RSBSPREAD_CONFIG_DIR}/rsb-spread-buildtree-settings.cmake")
    ELSE()
        SET(RSBSPREAD_INCLUDE_DIRS "${RSBSPREAD_CONFIG_DIR}/../../include/@INSTALL_PATH_PREFIX@")
        SET(RSBSPREAD_RUNTIME_LIBRARY_DIRS "${RSBSPREAD_CONFIG_DIR}/../../bin")
    ENDIF()

    SET(RSB_DIR "@RSB_DIR@" CACHE PATH "RSB location")
    FIND_PACKAGE(RSB REQUIRED)
    LIST(APPEND RSBSPREAD_INCLUDE_DIRS ${RSB_INCLUDE_DIRS})
    LIST(APPEND RSBSPREAD_LIBRARY_DIRS ${RSB_LIBRARY_DIRS})

    INCLUDE("${RSBSPREAD_CONFIG_DIR}/rsb-spread-depends.cmake")
    SET(RSBSPREAD_LIBRARIES @RSBSPREAD_NAME@)

ENDIF()
